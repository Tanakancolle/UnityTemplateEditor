# 置き換え処理機能
別機能の結果を**テンプレート設定ファイル**の**生成パス**、**スクリプト名**、**コード**に挿入できる機能です。

結果は`Dictionary<string, object>`型で受け渡され、対象文字列内の`{<Key>}`と置き替わります。
例として、対象文字列内に`{<Word>}`という文字があった場合、Dictionaryの`Key`が`Word`の`Value`が挿入されます。

## 結果の受け渡し方法

### 結果を出力するメソッドの定義
結果の出力は`IProcessChain`インターフェースを継承したクラスで行われます。
IProcessChainが定義している`Process`メソッドに引数として渡されるDictionaryへ置き換え対象とその値を入れてください。
注意点として、`スクリプト名`と`クラス名`を同じにして頂く必要があります。

何かパラメータが必要な場合は、IProcessChainを継承した`ScriptableObject`ファイルを作成してください。

### 結果を出力するメソッドの指定
**テンプレート設定ファイル**の**事前処理**リストへIProcessChainを継承した`クラスのスクリプト`または`ScriptableObjectファイル`を指定してください。
指定された対象は上から順に実行されていきます。

現状ではIProcessChainを継承していない場合でも事前処理へ追加が出来てしまいます。
継承していないオブジェクトが指定されていた場合はエラーが表示されます。

### 用意しているメソッド

#### TemplateSetting

**テンプレート設定ファイル**もIProcessChainを継承しています。
こちらは`ScriptableObjectファイル`にして使用してください。
`TemplateSetting`というKeyに`this`を入れています。
単体では機能しません。こちらの後にTemplateSettingを使用した処理を指定してください。

#### TemplateSettingCodeProcessor
TemplateSettingの後に実行してください。
こちらは`クラス`として使用してください。
`TemplateSettingCode`というKeyに`TemplateSettingに入っているコード部分`を入れています。

#### TemplateSettingCodeArrayProcessor
TemplateSettingの後に実行してください。
こちらは`クラス`として使用してください。
`TemplateSettingCode`というKeyに`TemplateSettingに入っているコード部分を改行で区切りの配列にしたもの`を入れています。

## 特殊な置き換え
置き換え時そのまま置き換えるのではなく、一定のルールで置き換える方法があります。
ルールの指定は`:`区切りで行われ、最初に`ルール名`、最後に`置き換え指定の文字`という形で定義します。
間にも文字が入ることがありますが、それはルール毎に変わってくるので、ルールの仕様を把握し、適切に記入する必要があります。
例：`{<ルール名:???:Key>}`

### Join処理
KeyのValueを繋ぎ、その間に接頭語と接尾語を挿入します。string.Joinに接頭語が追加されたイメージです。
`{<Join:接頭語:接尾語:Key>}`という形で指定します。
KeyのValueは`ICollection<string>`型（またはその派生）である必要があります。

### Repeat処理
KeyのValueの長さ分、置き換え文字の記入を繰り返します。
置き換え文字には`{数値}`が使用できます{数値}はValueの要素と置き換えが行われます。
`{<Repeat:置き換え文字:Key>}`という形で指定します。
KeyのValueは`IList<object>`または`IList<ICollection<object>>`（またはその派生）である必要があります。

## アイディア
この置き換え機能を利用して定義できそうなもの（実用性は置いてあります）。

- 指定するメソッドにより列挙するものを変更できる定数クラステンプレート
- 指定するメソッドにより機能を変更できるシェーダテンプレート
- ドキュメントテンプレート

## まとめ
ユーザーが仕様を理解している前提の機能となっており、使いづらい部分が多いと思います。
解決策を模索中ですが、良い案がありません。
しかし、この機能を上手く使えば定義できるテンプレートの幅がとても広がると思います。
ぜひ活用してみてください！